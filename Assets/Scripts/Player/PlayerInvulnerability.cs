using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PlayerInvulnerability : MonoBehaviour
{
    Renderer renderer;
    private EntityStats playerStats;

    void Start()
    {
        playerStats = GetComponent<EntityStats>();
        renderer = GetComponent<Renderer>();
    }

    void OnCollisionEnter2D(Collision2D collision)
    {
        var collisionStats = collision.gameObject.GetComponent<EntityStats>(); //Daca e colision cu ceva care da DMG 
        if (collisionStats != null)
        {
            StartCoroutine(BeInvulnerable());
        }
    }

    IEnumerator BeInvulnerable()
    {
        Color temp = renderer.material.color;
        temp.a = 0.75f;
        renderer.material.color= temp;
        playerStats.isInvulnerable = true;
        yield return new WaitForSeconds (playerStats.TimeOfInvulnerability);
        playerStats.isInvulnerable = false;
        temp.a = 1f;
        renderer.material.color = temp;
    }
}